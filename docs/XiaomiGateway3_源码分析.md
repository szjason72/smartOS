# XiaomiGateway3 æºç åˆ†ææŠ¥å‘Š

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**ï¼šXiaomiGateway3  
**é¡¹ç›®è·¯å¾„**ï¼š`/Users/szjason72/Downloads/xiaomi-gateway3`  
**é¡¹ç›®ç±»å‹**ï¼šHome Assistant è‡ªå®šä¹‰ç»„ä»¶  
**GitHub ä»“åº“**ï¼š[https://github.com/AlexxIT/XiaomiGateway3](https://github.com/AlexxIT/XiaomiGateway3)  
**GitCode é•œåƒ**ï¼š[https://gitcode.com/gh_mirrors/xia/XiaomiGateway3](https://gitcode.com/gh_mirrors/xia/XiaomiGateway3)

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- é€šè¿‡åŸå§‹å›ºä»¶æ§åˆ¶å°ç±³å¤šæ¨¡ç½‘å…³ï¼ˆGateway 3ã€Gateway 2ã€Aqara Hub E1ï¼‰
- æ”¯æŒ Zigbeeã€BLEã€Mesh è®¾å¤‡æ§åˆ¶
- é€šè¿‡ LAN é€šä¿¡ï¼Œæ— éœ€äº‘ç«¯
- æ”¯æŒ 500+ è®¾å¤‡ç±»å‹

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„åˆ†æ

### æ ¸å¿ƒç›®å½•ç»“æ„

```
xiaomi-gateway3/
â”œâ”€â”€ custom_components/
â”‚   â””â”€â”€ xiaomi_gateway3/
â”‚       â”œâ”€â”€ core/                    # æ ¸å¿ƒæ¨¡å—
â”‚       â”‚   â”œâ”€â”€ converters/          # è®¾å¤‡æ•°æ®è½¬æ¢å™¨
â”‚       â”‚   â”‚   â”œâ”€â”€ mesh.py         # Mesh è®¾å¤‡è½¬æ¢å™¨ â­
â”‚       â”‚   â”‚   â”œâ”€â”€ mibeacon.py     # BLE è®¾å¤‡è½¬æ¢å™¨ â­
â”‚       â”‚   â”‚   â”œâ”€â”€ zigbee.py       # Zigbee è®¾å¤‡è½¬æ¢å™¨
â”‚       â”‚   â”‚   â””â”€â”€ lumi.py         # Lumi è®¾å¤‡è½¬æ¢å™¨
â”‚       â”‚   â”œâ”€â”€ gate/               # ç½‘å…³é€šä¿¡æ¨¡å—
â”‚       â”‚   â”‚   â”œâ”€â”€ mesh.py         # Mesh ç½‘å…³é€šä¿¡ â­
â”‚       â”‚   â”‚   â”œâ”€â”€ ble.py          # BLE ç½‘å…³é€šä¿¡ â­
â”‚       â”‚   â”‚   â”œâ”€â”€ zigbee.py       # Zigbee ç½‘å…³é€šä¿¡
â”‚       â”‚   â”‚   â””â”€â”€ miot.py         # MIoT ç½‘å…³é€šä¿¡
â”‚       â”‚   â”œâ”€â”€ gateway.py          # ç½‘å…³æ ¸å¿ƒç±»
â”‚       â”‚   â”œâ”€â”€ device.py           # è®¾å¤‡æ ¸å¿ƒç±»
â”‚       â”‚   â””â”€â”€ mini_mqtt.py        # MQTT å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ cover.py                # çª—å¸˜è®¾å¤‡æ”¯æŒ â­
â”‚       â””â”€â”€ ...
â””â”€â”€ DEVICES.md                      # æ”¯æŒçš„è®¾å¤‡åˆ—è¡¨
```

---

## ğŸ” å…³é”®æ¨¡å—åˆ†æ

### 1. Mesh åè®®æ”¯æŒ â­â­â­

#### 1.1 Mesh ç½‘å…³é€šä¿¡æ¨¡å—

**æ–‡ä»¶**ï¼š`core/gate/mesh.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```python
class MeshGateway(XGateway):
    """Mesh ç½‘å…³é€šä¿¡ç±»"""
    
    async def mesh_read_devices(self, sh: ShellMGW):
        """è¯»å– Mesh è®¾å¤‡åˆ—è¡¨"""
        # ä»ç½‘å…³æ•°æ®åº“è¯»å– mesh_device_v3 è¡¨
        # è¯»å– mesh_group_v3 è¡¨ï¼ˆMesh ç»„ï¼‰
        
    def mesh_on_mqtt_publish(self, msg: MQTTMessage):
        """å¤„ç† MQTT æ¶ˆæ¯"""
        # å¤„ç† ble_mesh_keep_aliveï¼ˆè®¾å¤‡å¿ƒè·³ï¼‰
        # å¤„ç† ble_mesh_offlineï¼ˆè®¾å¤‡ç¦»çº¿ï¼‰
        
    def mesh_process_keepalive(self, data: list):
        """å¤„ç† Mesh è®¾å¤‡å¿ƒè·³"""
        # æ›´æ–°è®¾å¤‡ RSSI
        # æ›´æ–°è®¾å¤‡åœ¨çº¿çŠ¶æ€
        
    def mesh_process_offline(self, data: list):
        """å¤„ç† Mesh è®¾å¤‡ç¦»çº¿"""
```

**å…³é”®å‘ç°**ï¼š
- âœ… é€šè¿‡ MQTT æ¥æ”¶ç½‘å…³çš„ Mesh è®¾å¤‡æ¶ˆæ¯
- âœ… ä»ç½‘å…³æ•°æ®åº“è¯»å–è®¾å¤‡åˆ—è¡¨
- âœ… æ”¯æŒ Mesh è®¾å¤‡ç»„ï¼ˆGroupï¼‰
- âœ… æ”¯æŒè®¾å¤‡å¿ƒè·³å’Œç¦»çº¿æ£€æµ‹

#### 1.2 Mesh è®¾å¤‡è½¬æ¢å™¨

**æ–‡ä»¶**ï¼š`core/converters/mesh.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```python
class InductionRange(BaseConv):
    """æ„Ÿåº”èŒƒå›´è½¬æ¢å™¨"""
    
class GiotTimePatternConv(BaseConv):
    """æ—¶é—´æ¨¡å¼è½¬æ¢å™¨ï¼ˆç”¨äºå®šæ—¶ä»»åŠ¡ï¼‰"""
```

**æ”¯æŒçš„ Mesh è®¾å¤‡ç±»å‹**ï¼š
- Mesh ç¯æ³¡
- Mesh å¼€å…³
- Mesh ä¼ æ„Ÿå™¨
- Mesh çª—å¸˜ï¼ˆå¯èƒ½ï¼‰

---

### 2. BLE åè®®æ”¯æŒ â­â­â­

#### 2.1 BLE ç½‘å…³é€šä¿¡æ¨¡å—

**æ–‡ä»¶**ï¼š`core/gate/ble.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
```python
class BLEGateway(XGateway):
    """BLE ç½‘å…³é€šä¿¡ç±»"""
    
    async def ble_read_devices(self, sh: ShellMGW):
        """è¯»å– BLE è®¾å¤‡åˆ—è¡¨"""
        # ä»ç½‘å…³æ•°æ®åº“è¯»å– gateway_authed_table è¡¨
        
    def ble_on_mqtt_publish(self, msg: MQTTMessage):
        """å¤„ç† MQTT æ¶ˆæ¯"""
        # å¤„ç† ble_eventï¼ˆBLE äº‹ä»¶ï¼‰
        # å¤„ç† ble_keep_aliveï¼ˆBLE å¿ƒè·³ï¼‰
        
    def ble_process_event(self, data: dict):
        """å¤„ç† BLE è®¾å¤‡äº‹ä»¶"""
        # è§£æè®¾å¤‡äº‹ä»¶æ•°æ®
        # æ›´æ–°è®¾å¤‡çŠ¶æ€
        
    def ble_process_keepalive(self, data: list):
        """å¤„ç† BLE è®¾å¤‡å¿ƒè·³"""
```

**å…³é”®å‘ç°**ï¼š
- âœ… é€šè¿‡ MQTT æ¥æ”¶ç½‘å…³çš„ BLE è®¾å¤‡æ¶ˆæ¯
- âœ… æ”¯æŒåŠ¨æ€åˆ›å»ºè®¾å¤‡ï¼ˆon the flyï¼‰
- âœ… æ”¯æŒè®¾å¤‡äº‹ä»¶å’Œå¿ƒè·³
- âœ… æ”¯æŒåºåˆ—å·å»é‡ï¼ˆfrmCntï¼‰

#### 2.2 BLE è®¾å¤‡è½¬æ¢å™¨

**æ–‡ä»¶**ï¼š`core/converters/mibeacon.py`

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- BLE è®¾å¤‡æ•°æ®è§£æ
- BLE è®¾å¤‡å‘½ä»¤ç¼–ç 
- BLE è®¾å¤‡çŠ¶æ€è½¬æ¢

---

### 3. çª—å¸˜è®¾å¤‡æ”¯æŒ â­â­

#### 3.1 çª—å¸˜è®¾å¤‡å®ä½“

**æ–‡ä»¶**ï¼š`cover.py`

**æ”¯æŒçš„çª—å¸˜è®¾å¤‡**ï¼ˆä» DEVICES.mdï¼‰ï¼š
- Aqara Curtain (`ZNCLDJ11LM`, `lumi.curtain`)
- Aqara Curtain B1 EU (`ZNCLDJ12LM`)
- Aqara Curtain Motor C3 (`ZNCLDJ01LM`)
- Aqara Roller Shade (`ZNGZDJ11LM`)
- Aqara Roller Shade E1 CN (`ZNJLBL01LM`)

**çª—å¸˜æ§åˆ¶åŠŸèƒ½**ï¼š
- æ‰“å¼€/å…³é—­
- ä½ç½®æ§åˆ¶ï¼ˆ0-100%ï¼‰
- åœæ­¢
- åå‘æ§åˆ¶
- é€Ÿåº¦æ§åˆ¶

---

### 4. ç½‘å…³é€šä¿¡åè®®

#### 4.1 MQTT é€šä¿¡

**æ–‡ä»¶**ï¼š`core/mini_mqtt.py`

**MQTT Topic**ï¼š
- `miio/report` - è®¾å¤‡æŠ¥å‘Šæ¶ˆæ¯
- `central/report` - ä¸­å¤®è®¾å¤‡æŠ¥å‘Š

**æ¶ˆæ¯ç±»å‹**ï¼š
- `_sync.ble_mesh_keep_alive` - Mesh è®¾å¤‡å¿ƒè·³
- `_sync.ble_mesh_offline` - Mesh è®¾å¤‡ç¦»çº¿
- `_async.ble_event` - BLE è®¾å¤‡äº‹ä»¶
- `_sync.ble_keep_alive` - BLE è®¾å¤‡å¿ƒè·³

#### 4.2 Telnet/Shell é€šä¿¡

**æ–‡ä»¶**ï¼š`core/shell/shell_mgw.py`

**åŠŸèƒ½**ï¼š
- é€šè¿‡ Telnet è¿æ¥ç½‘å…³
- è¯»å–ç½‘å…³æ•°æ®åº“
- æ‰§è¡Œç½‘å…³å‘½ä»¤

**æ•°æ®åº“è¡¨**ï¼š
- `mesh_device_v3` - Mesh è®¾å¤‡è¡¨
- `mesh_group_v3` - Mesh ç»„è¡¨
- `gateway_authed_table` - BLE è®¾å¤‡æˆæƒè¡¨

---

## ğŸ¯ å¯¹ SmartOS é¡¹ç›®çš„ä»·å€¼

### âœ… å¯ç›´æ¥ä½¿ç”¨çš„éƒ¨åˆ†

#### 1. Mesh åè®®å®ç° â­â­â­

**ä»·å€¼**ï¼š
- âœ… å®Œæ•´çš„ Mesh è®¾å¤‡é€šä¿¡å®ç°
- âœ… Mesh è®¾å¤‡å‘ç°å’ŒçŠ¶æ€ç›‘å¬
- âœ… Mesh è®¾å¤‡æ§åˆ¶é€»è¾‘
- âœ… Mesh ç»„ï¼ˆGroupï¼‰æ”¯æŒ

**é€‚ç”¨åœºæ™¯**ï¼š
- å¦‚æœé¢†æ™® CE1 æ”¯æŒå°ç±³ Mesh åè®®ï¼Œå¯ä»¥ç›´æ¥å¤ç”¨
- å¯ä»¥ä½œä¸º Mesh åè®®å®ç°çš„å‚è€ƒ

#### 2. BLE åè®®å®ç° â­â­â­

**ä»·å€¼**ï¼š
- âœ… å®Œæ•´çš„ BLE è®¾å¤‡é€šä¿¡å®ç°
- âœ… BLE è®¾å¤‡äº‹ä»¶å¤„ç†
- âœ… BLE è®¾å¤‡å¿ƒè·³æœºåˆ¶
- âœ… BLE è®¾å¤‡åŠ¨æ€åˆ›å»º

**é€‚ç”¨åœºæ™¯**ï¼š
- å¦‚æœé¢†æ™® CE1 ä½¿ç”¨ BLE åè®®ï¼Œå¯ä»¥å‚è€ƒå®ç°
- å¯ä»¥ä½œä¸º BLE åè®®å®ç°çš„å‚è€ƒ

#### 3. ç½‘å…³é€šä¿¡æ¶æ„ â­â­

**ä»·å€¼**ï¼š
- âœ… MQTT é€šä¿¡å®ç°
- âœ… Telnet/Shell é€šä¿¡å®ç°
- âœ… è®¾å¤‡å‘ç°æœºåˆ¶
- âœ… è®¾å¤‡çŠ¶æ€åŒæ­¥

**é€‚ç”¨åœºæ™¯**ï¼š
- å¯ä»¥ä½œä¸ºç½‘å…³é€šä¿¡çš„å‚è€ƒæ¶æ„
- å¯ä»¥å­¦ä¹ è®¾å¤‡å‘ç°å’ŒçŠ¶æ€ç®¡ç†

#### 4. çª—å¸˜è®¾å¤‡æ§åˆ¶ â­â­

**ä»·å€¼**ï¼š
- âœ… çª—å¸˜è®¾å¤‡å®ä½“å®ç°
- âœ… çª—å¸˜æ§åˆ¶é€»è¾‘ï¼ˆå¼€/å…³/ä½ç½®ï¼‰
- âœ… çª—å¸˜çŠ¶æ€åé¦ˆ

**é€‚ç”¨åœºæ™¯**ï¼š
- å¯ä»¥ç›´æ¥å‚è€ƒçª—å¸˜æ§åˆ¶é€»è¾‘
- å¯ä»¥ä½œä¸ºçª—å¸˜è®¾å¤‡å®ç°çš„å‚è€ƒ

---

### âš ï¸ é™åˆ¶å’Œæ³¨æ„äº‹é¡¹

#### 1. åè®®å…¼å®¹æ€§

**é—®é¢˜**ï¼š
- âš ï¸ é¢†æ™® CE1 ä½¿ç”¨**è“ç‰™ Mesh 2.0**åè®®
- âš ï¸ å°ç±³ç½‘å…³å¯èƒ½åªæ”¯æŒ**è“ç‰™ Mesh 1.0**æˆ–ç‰¹å®šåè®®
- âš ï¸ éœ€è¦ç¡®è®¤é¢†æ™® CE1 æ˜¯å¦æ”¯æŒå°ç±³ç”Ÿæ€

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å…ˆæµ‹è¯•é¢†æ™® CE1 æ˜¯å¦å¯ä»¥é€šè¿‡å°ç±³ç½‘å…³æ§åˆ¶
- å¦‚æœä¸æ”¯æŒï¼Œéœ€è¦å®ç°è“ç‰™ Mesh 2.0 å®¢æˆ·ç«¯

#### 2. å¹³å°ä¾èµ–

**é—®é¢˜**ï¼š
- âš ï¸ è¿™æ˜¯ Home Assistant ç»„ä»¶ï¼Œä¾èµ– HA æ¡†æ¶
- âš ï¸ éœ€è¦é€‚é…åˆ° SmartOS çš„ Spring Boot æ¶æ„

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æå–æ ¸å¿ƒé€šä¿¡é€»è¾‘
- é€‚é…åˆ° SmartOS çš„æ¶æ„
- ä½¿ç”¨ Java/Python å®ç°

#### 3. ç½‘å…³è¦æ±‚

**é—®é¢˜**ï¼š
- âš ï¸ éœ€è¦å°ç±³å¤šæ¨¡ç½‘å…³ï¼ˆGateway 3/2 æˆ– Aqara Hub E1ï¼‰
- âš ï¸ éœ€è¦ç½‘å…³çš„ Token å’Œ Keyï¼ˆæŸäº›å›ºä»¶ç‰ˆæœ¬ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š
- å¦‚æœå·²æœ‰å°ç±³ç½‘å…³ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
- å¦‚æœæ²¡æœ‰ï¼Œéœ€è¦è´­ä¹°æˆ–ä½¿ç”¨å…¶ä»–ç½‘å…³æ–¹æ¡ˆ

---

## ğŸ”§ é›†æˆå»ºè®®

### æ–¹æ¡ˆä¸€ï¼šé€šè¿‡å°ç±³ç½‘å…³é›†æˆï¼ˆå¦‚æœå…¼å®¹ï¼‰â­

**æ¶æ„**ï¼š
```
BC4 Pro (å…‰æ„Ÿæ•°æ®æº)
    â†“ HTTP/MQTT
SmartOS åç«¯
    â†“ å‚è€ƒ XiaomiGateway3 ä»£ç 
å°ç±³å¤šæ¨¡ç½‘å…³
    â†“ è“ç‰™ Mesh / BLE
é¢†æ™® CE1 (å¦‚æœæ”¯æŒå°ç±³ç”Ÿæ€)
```

**å®æ–½æ­¥éª¤**ï¼š
1. **æå–æ ¸å¿ƒä»£ç **
   - æå– `core/gate/mesh.py` å’Œ `core/gate/ble.py`
   - æå– `core/mini_mqtt.py` MQTT å®¢æˆ·ç«¯
   - æå–è®¾å¤‡è½¬æ¢å™¨é€»è¾‘

2. **é€‚é…åˆ° SmartOS**
   - ä½¿ç”¨ Java/Python å®ç° MQTT å®¢æˆ·ç«¯
   - å®ç°ç½‘å…³é€šä¿¡æ¥å£
   - å®ç°è®¾å¤‡æ§åˆ¶é€»è¾‘

3. **æµ‹è¯•å…¼å®¹æ€§**
   - æµ‹è¯•é¢†æ™® CE1 æ˜¯å¦æ”¯æŒå°ç±³ç”Ÿæ€
   - æµ‹è¯•ç½‘å…³æ§åˆ¶åŠŸèƒ½

### æ–¹æ¡ˆäºŒï¼šç›´æ¥å®ç°è“ç‰™ Mesh å®¢æˆ·ç«¯ï¼ˆå¦‚æœä¸å…¼å®¹ï¼‰

**æ¶æ„**ï¼š
```
BC4 Pro (å…‰æ„Ÿæ•°æ®æº)
    â†“ HTTP/MQTT
SmartOS åç«¯
    â†“ è“ç‰™ Mesh 2.0 å®¢æˆ·ç«¯
é¢†æ™® CE1 (è“ç‰™ Mesh 2.0)
```

**å‚è€ƒèµ„æº**ï¼š
- ESP-BLE-MESH SDK
- Nordic nRF Mesh SDK
- Zephyr RTOS Mesh

---

## ğŸ“ å…³é”®ä»£ç ç‰‡æ®µ

### 1. Mesh è®¾å¤‡è¯»å–

```python
# core/gate/mesh.py
async def mesh_read_devices(self, sh: ShellMGW):
    db = await sh.read_db_bluetooth()
    
    # è¯»å– Mesh è®¾å¤‡
    rows = sh.db.read_table("mesh_device_v3")
    for row in rows:
        did = row[0]
        mac = row[1].lower()
        model = row[2]
        device = self.init_device(model, did=did, mac=mac, type=MESH)
        self.add_device(device)
    
    # è¯»å– Mesh ç»„
    rows = sh.db.read_table("mesh_group_v3")
    for row in rows:
        did = "group." + row[0]
        model = row[2]
        device = self.init_device(model, did=did, type=GROUP)
        self.add_device(device)
```

### 2. Mesh è®¾å¤‡å¿ƒè·³å¤„ç†

```python
# core/gate/mesh.py
def mesh_process_keepalive(self, data: list):
    ts = int(time.time())
    for item in data:
        if device := self.devices.get(item["did"]):
            device.extra["rssi_" + self.device.uid] = item["rssi"]
            device.on_keep_alive(self, ts)
```

### 3. BLE è®¾å¤‡äº‹ä»¶å¤„ç†

```python
# core/gate/ble.py
def ble_process_event(self, data: dict):
    did = data["dev"]["did"]
    device = self.devices.get(did)
    if not device:
        # åŠ¨æ€åˆ›å»ºè®¾å¤‡
        model = data["dev"]["pdid"]
        mac = data["dev"]["mac"].lower()
        device = self.init_device(model, type=BLE, mac=mac, did=did)
        self.add_device(device)
    
    device.on_report(data["evt"], self, ts)
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### 1. æµ‹è¯•å…¼å®¹æ€§

**ä»»åŠ¡**ï¼š
- [ ] ç¡®è®¤é¢†æ™® CE1 æ˜¯å¦æ”¯æŒå°ç±³ç”Ÿæ€
- [ ] æµ‹è¯•æ˜¯å¦å¯ä»¥é€šè¿‡å°ç±³ç½‘å…³æ§åˆ¶é¢†æ™® CE1
- [ ] ç¡®è®¤è“ç‰™ Mesh 2.0 å…¼å®¹æ€§

### 2. æå–æ ¸å¿ƒä»£ç 

**ä»»åŠ¡**ï¼š
- [ ] æå– Mesh ç½‘å…³é€šä¿¡ä»£ç 
- [ ] æå– BLE ç½‘å…³é€šä¿¡ä»£ç 
- [ ] æå– MQTT å®¢æˆ·ç«¯ä»£ç 
- [ ] æå–è®¾å¤‡è½¬æ¢å™¨ä»£ç 

### 3. é€‚é…åˆ° SmartOS

**ä»»åŠ¡**ï¼š
- [ ] ä½¿ç”¨ Java/Python å®ç°ç½‘å…³é€šä¿¡æ¥å£
- [ ] å®ç°è®¾å¤‡æ§åˆ¶é€»è¾‘
- [ ] é›†æˆåˆ° SmartOS åç«¯

### 4. å®ç°çª—å¸˜æ§åˆ¶

**ä»»åŠ¡**ï¼š
- [ ] å‚è€ƒ `cover.py` å®ç°çª—å¸˜æ§åˆ¶
- [ ] å®ç°ä½ç½®æ§åˆ¶ï¼ˆ0-100%ï¼‰
- [ ] å®ç°åŒçª—å¸˜ç‹¬ç«‹æ§åˆ¶

---

## ğŸ“š å‚è€ƒèµ„æº

- **é¡¹ç›®ä»“åº“**ï¼š[https://github.com/AlexxIT/XiaomiGateway3](https://github.com/AlexxIT/XiaomiGateway3)
- **è®¾å¤‡åˆ—è¡¨**ï¼š`DEVICES.md`
- **README**ï¼š`README.md`
- **æµ‹è¯•ä»£ç **ï¼š`tests/` ç›®å½•

---

## âœ… æ€»ç»“

### å‘ç°çš„ä»·å€¼

1. **Mesh åè®®å®ç°**ï¼šå®Œæ•´çš„ Mesh è®¾å¤‡é€šä¿¡å®ç°ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒ
2. **BLE åè®®å®ç°**ï¼šå®Œæ•´çš„ BLE è®¾å¤‡é€šä¿¡å®ç°ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒ
3. **ç½‘å…³é€šä¿¡æ¶æ„**ï¼šMQTT å’Œ Telnet é€šä¿¡å®ç°ï¼Œå¯ä»¥ä½œä¸ºå‚è€ƒ
4. **çª—å¸˜è®¾å¤‡æ”¯æŒ**ï¼šçª—å¸˜æ§åˆ¶é€»è¾‘ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒ

### éœ€è¦æ³¨æ„çš„é—®é¢˜

1. **åè®®å…¼å®¹æ€§**ï¼šéœ€è¦ç¡®è®¤é¢†æ™® CE1 æ˜¯å¦æ”¯æŒå°ç±³ç”Ÿæ€
2. **å¹³å°ä¾èµ–**ï¼šéœ€è¦é€‚é…åˆ° SmartOS çš„æ¶æ„
3. **ç½‘å…³è¦æ±‚**ï¼šéœ€è¦å°ç±³å¤šæ¨¡ç½‘å…³

### æ¨èæ–¹æ¡ˆ

**å¦‚æœé¢†æ™® CE1 æ”¯æŒå°ç±³ç”Ÿæ€**ï¼š
- âœ… ä½¿ç”¨ XiaomiGateway3 çš„ä»£ç ä½œä¸ºå‚è€ƒ
- âœ… é€šè¿‡å°ç±³ç½‘å…³æ§åˆ¶é¢†æ™® CE1
- âœ… å¤ç”¨ Mesh/BLE é€šä¿¡é€»è¾‘

**å¦‚æœé¢†æ™® CE1 ä¸æ”¯æŒå°ç±³ç”Ÿæ€**ï¼š
- âš ï¸ éœ€è¦å®ç°è“ç‰™ Mesh 2.0 å®¢æˆ·ç«¯
- âš ï¸ æˆ–ä½¿ç”¨å…¶ä»–ç½‘å…³æ–¹æ¡ˆï¼ˆå¦‚ Home Assistantï¼‰

---

**åˆ†ææ—¥æœŸ**ï¼š2025-01-03  
**é¡¹ç›®ç‰ˆæœ¬**ï¼šXiaomiGateway3 (æœ€æ–°)  
**åˆ†æçŠ¶æ€**ï¼šæºç åˆ†æå®Œæˆï¼Œéœ€è¦å®é™…æµ‹è¯•éªŒè¯
